(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8332:function(e,r,t){Promise.resolve().then(t.bind(t,4341))},4341:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x}});var n=t(3827),s=t(4090),i=t(1654),a=t(1543),l=t(9313),o=t(2367),c=t(3508),d=t(1657),u=t(9259),h=t(2235);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,t(7461).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function x(){let[e,r]=(0,s.useState)([]),[t,x]=(0,s.useState)([]),[f,p]=(0,s.useState)(null),[b,g]=(0,s.useState)(0),[j,w]=(0,s.useState)(0),[v,y]=(0,s.useState)(!0),N=(0,i.e)();(0,s.useEffect)(()=>{_()},[]);let _=async()=>{let{data:{user:e}}=await N.auth.getUser();if(!e)return;let{data:t}=await N.from("club_admins").select("club_id").eq("user_id",e.id).eq("active",!0).single();if(!t)return;p(t.club_id);let{data:n,count:s}=await N.from("club_members").select("*, users(name, email)",{count:"exact"}).eq("club_id",t.club_id).eq("status","approved").order("joined_at",{ascending:!0});r(n||[]),g(s||0),w((null==n?void 0:n.filter(e=>e.is_organizer).length)||0);let{data:i}=await N.from("club_members").select("*, users(name, email)").eq("club_id",t.club_id).eq("status","pending").order("joined_at",{ascending:!0});x(i||[]),y(!1)},k=async e=>{let{error:r}=await N.from("club_members").update({status:"approved"}).eq("id",e);if(!r){let r=t.find(r=>r.id===e);r&&await N.from("notifications").insert({user_id:r.user_id,type:"member_approved",message:"Your club membership has been approved!",channel:"in_app"}),_()}},C=async e=>{let{error:r}=await N.from("club_members").update({status:"rejected"}).eq("id",e);r||_()},z=async(e,r)=>{let t=(0,d.zo)(b);if(!r&&j>=t){alert("Maximum ".concat(t," organizers allowed for ").concat(b," members"));return}let{error:n}=await N.from("club_members").update({is_organizer:!r}).eq("id",e);n||_()},M=(0,d.zo)(b);return v?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"max-w-6xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Member Management"}),(0,n.jsx)(a.Zb,{className:"mb-6",children:(0,n.jsxs)(a.aY,{className:"pt-6",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Organizers: ",j," / ",M," (5 per 20 members)"]}),(0,n.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,n.jsx)("div",{className:"h-2 rounded-full bg-primary-600",style:{width:"".concat(Math.min(j/(M||1)*100,100),"%")}})})]})}),t.length>0&&(0,n.jsxs)(a.Zb,{className:"mb-6",children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)(a.ll,{children:["Pending Approvals (",t.length,")"]})}),(0,n.jsx)(a.aY,{children:(0,n.jsxs)(c.iA,{children:[(0,n.jsx)(c.xD,{children:(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.ss,{children:"Name"}),(0,n.jsx)(c.ss,{children:"Email"}),(0,n.jsx)(c.ss,{children:"Requested"}),(0,n.jsx)(c.ss,{children:"Actions"})]})}),(0,n.jsx)(c.RM,{children:t.map(e=>(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.pj,{className:"font-medium",children:e.users.name}),(0,n.jsx)(c.pj,{children:e.users.email}),(0,n.jsx)(c.pj,{className:"text-gray-600",children:new Date(e.joined_at).toLocaleDateString()}),(0,n.jsx)(c.pj,{children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(l.z,{size:"sm",variant:"primary",onClick:()=>k(e.id),children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,n.jsxs)(l.z,{size:"sm",variant:"danger",onClick:()=>C(e.id),children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Reject"]})]})})]},e.id))})]})})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)(a.ll,{children:["Approved Members (",e.length,")"]})}),(0,n.jsx)(a.aY,{children:(0,n.jsxs)(c.iA,{children:[(0,n.jsx)(c.xD,{children:(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.ss,{children:"Name"}),(0,n.jsx)(c.ss,{children:"Email"}),(0,n.jsx)(c.ss,{children:"Status"}),(0,n.jsx)(c.ss,{children:"Joined"}),(0,n.jsx)(c.ss,{children:"Actions"})]})}),(0,n.jsx)(c.RM,{children:e.map(e=>(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.pj,{className:"font-medium",children:e.users.name}),(0,n.jsx)(c.pj,{children:e.users.email}),(0,n.jsx)(c.pj,{children:e.is_organizer?(0,n.jsxs)(o.C,{variant:"warning",children:[(0,n.jsx)(m,{className:"h-3 w-3 mr-1"}),"Organizer"]}):(0,n.jsx)(o.C,{variant:"default",children:"Member"})}),(0,n.jsx)(c.pj,{className:"text-gray-600",children:new Date(e.joined_at).toLocaleDateString()}),(0,n.jsx)(c.pj,{children:(0,n.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>z(e.id,e.is_organizer),children:e.is_organizer?"Remove Organizer":"Make Organizer"})})]},e.id))})]})})]})]})}},2367:function(e,r,t){"use strict";t.d(r,{C:function(){return i}});var n=t(3827),s=t(1657);function i(e){let{className:r,variant:t="default",children:i,...a}=e;return(0,n.jsx)("span",{className:(0,s.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-gray-100 text-gray-800":"default"===t,"bg-success-100 text-success-800":"success"===t,"bg-warning-100 text-warning-800":"warning"===t,"bg-error-100 text-error-800":"error"===t,"bg-primary-100 text-primary-800":"info"===t},r),...a,children:i})}},9313:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var n=t(3827),s=t(1657);let i=(0,t(4090).forwardRef)((e,r)=>{let{className:t,variant:i="primary",size:a="md",isLoading:l,children:o,...c}=e;return(0,n.jsxs)("button",{ref:r,disabled:l||c.disabled,className:(0,s.cn)("inline-flex items-center justify-center font-semibold","transition-all duration-300 ease-out","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent","disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed","relative overflow-hidden group","hover:shadow-lg hover:shadow-blue-500/25 hover:-translate-y-0.5","active:scale-95 active:translate-y-0",{"px-3 py-1.5 text-sm rounded-lg":"sm"===a,"px-4 py-2.5 text-sm rounded-lg":"md"===a,"px-6 py-3 text-base rounded-xl":"lg"===a,"px-8 py-4 text-lg rounded-xl":"xl"===a},{"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl focus:ring-blue-500":"primary"===i||"gradient"===i,"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 focus:ring-white/50":"secondary"===i,"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white shadow-lg hover:shadow-red-500/25 focus:ring-red-500":"danger"===i,"bg-transparent hover:bg-white/10 text-slate-300 hover:text-white border border-transparent hover:border-white/20 focus:ring-white/50":"ghost"===i},{"cursor-wait":l},t),...c,children:[(0,n.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12"}),(0,n.jsxs)("span",{className:"relative z-10 flex items-center",children:[l&&(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]})]})});i.displayName="Button"},1543:function(e,r,t){"use strict";t.d(r,{Ol:function(){return a},Zb:function(){return i},aY:function(){return o},ll:function(){return l}});var n=t(3827),s=t(1657);function i(e){let{className:r,children:t,variant:i="default",interactive:a=!1,glowEffect:l=!1,...o}=e;return(0,n.jsx)("div",{className:(0,s.cn)("rounded-2xl transition-all duration-300",{"bg-white/5 backdrop-blur-sm border border-white/10 p-8":"glass"===i||"default"===i,"bg-white/10 backdrop-blur-md border border-white/20 p-8 shadow-2xl":"elevated"===i,"bg-slate-800/50 backdrop-blur-sm border border-slate-700 p-6":"minimal"===i},a&&["hover:bg-white/10 hover:border-white/20 hover:scale-105 cursor-pointer","hover:shadow-2xl hover:shadow-blue-500/10 transition-all duration-300"],l&&["relative overflow-hidden","before:absolute before:inset-0 before:bg-gradient-to-r before:from-blue-500/20 before:to-purple-500/20 before:opacity-0 before:transition-opacity before:duration-300","hover:before:opacity-100"],r),...o,children:t})}function a(e){let{className:r,children:t,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)("mb-6",r),...i,children:t})}function l(e){let{className:r,children:t,...i}=e;return(0,n.jsx)("h3",{className:(0,s.cn)("text-2xl font-bold text-white leading-tight","bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",r),...i,children:t})}function o(e){let{className:r,children:t,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)("space-y-4",r),...i,children:t})}},3508:function(e,r,t){"use strict";t.d(r,{RM:function(){return l},SC:function(){return o},iA:function(){return i},pj:function(){return d},ss:function(){return c},xD:function(){return a}});var n=t(3827),s=t(1657);function i(e){let{className:r,...t}=e;return(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsx)("table",{className:(0,s.cn)("min-w-full divide-y divide-gray-200",r),...t})})}function a(e){let{className:r,...t}=e;return(0,n.jsx)("thead",{className:(0,s.cn)("bg-gray-50",r),...t})}function l(e){let{className:r,...t}=e;return(0,n.jsx)("tbody",{className:(0,s.cn)("bg-white divide-y divide-gray-200",r),...t})}function o(e){let{className:r,...t}=e;return(0,n.jsx)("tr",{className:(0,s.cn)("hover:bg-gray-50",r),...t})}function c(e){let{className:r,...t}=e;return(0,n.jsx)("th",{className:(0,s.cn)("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",r),...t})}function d(e){let{className:r,...t}=e;return(0,n.jsx)("td",{className:(0,s.cn)("px-6 py-4 whitespace-nowrap text-sm",r),...t})}},1654:function(e,r,t){"use strict";t.d(r,{e:function(){return s}});var n=t(2095);let s=()=>(0,n.createBrowserClient)("https://xhuwyhirsxmaairbmset.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhodXd5aGlyc3htYWFpcmJtc2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3OTQwMTMsImV4cCI6MjA3ODM3MDAxM30.5KnhTKxbakwabHmCGvAD7TC8x3SvNIUV28BIcY3QL7s")},1657:function(e,r,t){"use strict";t.d(r,{cn:function(){return i},lV:function(){return l},o0:function(){return a},zo:function(){return o}});var n=t(3167),s=t(1367);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}function a(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function l(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function o(e){return 5*Math.floor(e/20)}},7461:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(4090),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,r)=>{let t=(0,n.forwardRef)((t,a)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=t;return(0,n.createElement)("svg",{ref:a,...s,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(i(e)),u].join(" "),...m},[...r.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(h)?h:[h]])});return t.displayName="".concat(e),t}},9259:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2235:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[59,971,69,744],function(){return e(e.s=8332)}),_N_E=e.O()}]);