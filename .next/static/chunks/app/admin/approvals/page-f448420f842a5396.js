(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{3814:function(e,t,r){Promise.resolve().then(r.bind(r,1835))},1835:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(3827),s=r(4090),i=r(1654),a=r(1543),l=r(9313),c=r(2367),o=r(3508),d=r(9259),u=r(2235);function h(){let[e,t]=(0,s.useState)([]),[r,h]=(0,s.useState)([]),[m,x]=(0,s.useState)(null),[p,f]=(0,s.useState)(!0),g=(0,i.e)();(0,s.useEffect)(()=>{b()},[]);let b=async()=>{let{data:{user:e}}=await g.auth.getUser();if(!e)return;let{data:r}=await g.from("club_admins").select("*").eq("user_id",e.id).eq("active",!0).single();if(!r)return;x(r.club_id);let{data:n}=await g.from("role_requests").select("\n        *,\n        users(name, email),\n        roles(name),\n        meetings(title, scheduled_at)\n      ").eq("status","pending"),{data:s}=await g.from("meetings").select("id").eq("club_id",r.club_id),i=(null==s?void 0:s.map(e=>e.id))||[];t((null==n?void 0:n.filter(e=>i.includes(e.meeting_id)))||[]);let{data:a}=await g.from("achievement_requests").select("\n        *,\n        users(name, email),\n        levels(number, title, club_id),\n        meetings(title)\n      ").eq("status","pending");h((null==a?void 0:a.filter(e=>e.levels.club_id===r.club_id))||[]),f(!1)},j=async(e,t)=>{let{data:{user:r}}=await g.auth.getUser();if(!r)return;let{error:n}=await g.from("role_requests").update({status:"approved",decided_by:r.id,decided_at:new Date().toISOString()}).eq("id",e);n||(await g.from("notifications").insert({user_id:t,type:"role_approved",message:"Your role request has been approved!",channel:"in_app"}),b())},v=async(e,t)=>{let{data:{user:r}}=await g.auth.getUser();if(!r)return;let{error:n}=await g.from("role_requests").update({status:"rejected",decided_by:r.id,decided_at:new Date().toISOString()}).eq("id",e);n||(await g.from("notifications").insert({user_id:t,type:"role_rejected",message:"Your role request was not approved.",channel:"in_app"}),b())},w=async(e,t)=>{let{data:{user:r}}=await g.auth.getUser();if(!r)return;let{error:n}=await g.from("achievement_requests").update({status:"approved",decided_by:r.id,decided_at:new Date().toISOString()}).eq("id",e);n||(await g.from("notifications").insert({user_id:t,type:"achievement_approved",message:"Your achievement has been approved! Certificate will be generated.",channel:"in_app"}),b())},y=async(e,t)=>{let{data:{user:r}}=await g.auth.getUser();if(!r)return;let{error:n}=await g.from("achievement_requests").update({status:"rejected",decided_by:r.id,decided_at:new Date().toISOString()}).eq("id",e);n||(await g.from("notifications").insert({user_id:t,type:"achievement_rejected",message:"Your achievement request was not approved.",channel:"in_app"}),b())};return p?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"max-w-6xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Approvals"}),(0,n.jsxs)(a.Zb,{className:"mb-6",children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)(a.ll,{children:["Pending Role Requests (",e.length,")"]})}),(0,n.jsx)(a.aY,{children:e.length>0?(0,n.jsxs)(o.iA,{children:[(0,n.jsx)(o.xD,{children:(0,n.jsxs)(o.SC,{children:[(0,n.jsx)(o.ss,{children:"Member"}),(0,n.jsx)(o.ss,{children:"Meeting"}),(0,n.jsx)(o.ss,{children:"Role"}),(0,n.jsx)(o.ss,{children:"Requested"}),(0,n.jsx)(o.ss,{children:"Actions"})]})}),(0,n.jsx)(o.RM,{children:e.map(e=>(0,n.jsxs)(o.SC,{children:[(0,n.jsx)(o.pj,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.users.name}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:e.users.email})]})}),(0,n.jsx)(o.pj,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.meetings.title}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.meetings.scheduled_at).toLocaleDateString()})]})}),(0,n.jsx)(o.pj,{children:(0,n.jsx)(c.C,{variant:"info",children:e.roles.name})}),(0,n.jsx)(o.pj,{className:"text-gray-600",children:new Date(e.created_at).toLocaleDateString()}),(0,n.jsx)(o.pj,{children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(l.z,{size:"sm",onClick:()=>j(e.id,e.user_id),children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,n.jsxs)(l.z,{size:"sm",variant:"danger",onClick:()=>v(e.id,e.user_id),children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Reject"]})]})})]},e.id))})]}):(0,n.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No pending role requests"})})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)(a.ll,{children:["Pending Achievement Requests (",r.length,")"]})}),(0,n.jsx)(a.aY,{children:r.length>0?(0,n.jsxs)(o.iA,{children:[(0,n.jsx)(o.xD,{children:(0,n.jsxs)(o.SC,{children:[(0,n.jsx)(o.ss,{children:"Member"}),(0,n.jsx)(o.ss,{children:"Level"}),(0,n.jsx)(o.ss,{children:"Meeting"}),(0,n.jsx)(o.ss,{children:"Notes"}),(0,n.jsx)(o.ss,{children:"Actions"})]})}),(0,n.jsx)(o.RM,{children:r.map(e=>(0,n.jsxs)(o.SC,{children:[(0,n.jsx)(o.pj,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.users.name}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:e.users.email})]})}),(0,n.jsx)(o.pj,{children:(0,n.jsxs)(c.C,{variant:"warning",children:["Level ",e.levels.number,": ",e.levels.title]})}),(0,n.jsx)(o.pj,{className:"font-medium",children:e.meetings.title}),(0,n.jsx)(o.pj,{className:"text-sm text-gray-600",children:e.notes||"No notes"}),(0,n.jsx)(o.pj,{children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(l.z,{size:"sm",onClick:()=>w(e.id,e.user_id),children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,n.jsxs)(l.z,{size:"sm",variant:"danger",onClick:()=>y(e.id,e.user_id),children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Reject"]})]})})]},e.id))})]}):(0,n.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No pending achievement requests"})})]})]})}},2367:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(3827),s=r(1657);function i(e){let{className:t,variant:r="default",children:i,...a}=e;return(0,n.jsx)("span",{className:(0,s.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-gray-100 text-gray-800":"default"===r,"bg-success-100 text-success-800":"success"===r,"bg-warning-100 text-warning-800":"warning"===r,"bg-error-100 text-error-800":"error"===r,"bg-primary-100 text-primary-800":"info"===r},t),...a,children:i})}},9313:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var n=r(3827),s=r(1657);let i=(0,r(4090).forwardRef)((e,t)=>{let{className:r,variant:i="primary",size:a="md",isLoading:l,children:c,...o}=e;return(0,n.jsxs)("button",{ref:t,disabled:l||o.disabled,className:(0,s.cn)("inline-flex items-center justify-center font-semibold","transition-all duration-300 ease-out","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent","disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed","relative overflow-hidden group","hover:shadow-lg hover:shadow-blue-500/25 hover:-translate-y-0.5","active:scale-95 active:translate-y-0",{"px-3 py-1.5 text-sm rounded-lg":"sm"===a,"px-4 py-2.5 text-sm rounded-lg":"md"===a,"px-6 py-3 text-base rounded-xl":"lg"===a,"px-8 py-4 text-lg rounded-xl":"xl"===a},{"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl focus:ring-blue-500":"primary"===i||"gradient"===i,"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 focus:ring-white/50":"secondary"===i,"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white shadow-lg hover:shadow-red-500/25 focus:ring-red-500":"danger"===i,"bg-transparent hover:bg-white/10 text-slate-300 hover:text-white border border-transparent hover:border-white/20 focus:ring-white/50":"ghost"===i},{"cursor-wait":l},r),...o,children:[(0,n.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12"}),(0,n.jsxs)("span",{className:"relative z-10 flex items-center",children:[l&&(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})]})});i.displayName="Button"},1543:function(e,t,r){"use strict";r.d(t,{Ol:function(){return a},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var n=r(3827),s=r(1657);function i(e){let{className:t,children:r,variant:i="default",interactive:a=!1,glowEffect:l=!1,...c}=e;return(0,n.jsx)("div",{className:(0,s.cn)("rounded-2xl transition-all duration-300",{"bg-white/5 backdrop-blur-sm border border-white/10 p-8":"glass"===i||"default"===i,"bg-white/10 backdrop-blur-md border border-white/20 p-8 shadow-2xl":"elevated"===i,"bg-slate-800/50 backdrop-blur-sm border border-slate-700 p-6":"minimal"===i},a&&["hover:bg-white/10 hover:border-white/20 hover:scale-105 cursor-pointer","hover:shadow-2xl hover:shadow-blue-500/10 transition-all duration-300"],l&&["relative overflow-hidden","before:absolute before:inset-0 before:bg-gradient-to-r before:from-blue-500/20 before:to-purple-500/20 before:opacity-0 before:transition-opacity before:duration-300","hover:before:opacity-100"],t),...c,children:r})}function a(e){let{className:t,children:r,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)("mb-6",t),...i,children:r})}function l(e){let{className:t,children:r,...i}=e;return(0,n.jsx)("h3",{className:(0,s.cn)("text-2xl font-bold text-white leading-tight","bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",t),...i,children:r})}function c(e){let{className:t,children:r,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)("space-y-4",t),...i,children:r})}},3508:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return d},ss:function(){return o},xD:function(){return a}});var n=r(3827),s=r(1657);function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsx)("table",{className:(0,s.cn)("min-w-full divide-y divide-gray-200",t),...r})})}function a(e){let{className:t,...r}=e;return(0,n.jsx)("thead",{className:(0,s.cn)("bg-gray-50",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("tbody",{className:(0,s.cn)("bg-white divide-y divide-gray-200",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("tr",{className:(0,s.cn)("hover:bg-gray-50",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("th",{className:(0,s.cn)("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("td",{className:(0,s.cn)("px-6 py-4 whitespace-nowrap text-sm",t),...r})}},1654:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var n=r(2095);let s=()=>(0,n.createBrowserClient)("https://xhuwyhirsxmaairbmset.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhodXd5aGlyc3htYWFpcmJtc2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3OTQwMTMsImV4cCI6MjA3ODM3MDAxM30.5KnhTKxbakwabHmCGvAD7TC8x3SvNIUV28BIcY3QL7s")},1657:function(e,t,r){"use strict";r.d(t,{cn:function(){return i},lV:function(){return l},o0:function(){return a},zo:function(){return c}});var n=r(3167),s=r(1367);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function a(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function l(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function c(e){return 5*Math.floor(e/20)}},7461:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(4090),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=r;return(0,n.createElement)("svg",{ref:a,...s,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(i(e)),u].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},9259:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2235:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[59,971,69,744],function(){return e(e.s=3814)}),_N_E=e.O()}]);